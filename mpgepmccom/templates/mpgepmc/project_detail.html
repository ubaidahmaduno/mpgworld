{% extends 'mpgepmc/base.html' %}
{% load static %}

{% block title %}{{ project.title }} | MPG epmc{% endblock %}

{% block extra_head %}
<link rel=stylesheet href="{% static 'css/project_detail.css' %}">
{% endblock %}

{% block content %}
<!-- Page Title/Header Section -->
<section class="page-title-section">
    <div class="detail-container">
        <span class="category-badge">{{ project.get_category_display }}</span>
        <h1>{{ project.title }}</h1>
    </div>
</section>

<!-- Project Detail Section -->
<section class="project-detail-section">
    <div class="detail-container">
        <div class="detail-row">
            <!-- Main Content -->
            <div class="detail-col-main">
                <article class="project-content">
                    {% if project.image %}
                    <img src="{{ project.image.url }}" class="main-image" alt="{{ project.title }}">
                    {% endif %}
                    
                    <div class="meta">
                        <span>Posted on {{ project.posted_date|date:"F d, Y" }}</span>
                    </div>

                    <div class="content-body">
                        <!-- Using safe filter because we trust the admin to not post malicious HTML -->
                        {{ project.full_description|safe }}
                    </div>
                </article>
            </div>

            <!-- Sidebar -->
            <div class="detail-col-sidebar">
                <aside class="sidebar">
                    <div class="sidebar-widget">
                        <h5 class="widget-title">Project Summary</h5>
                        <p>{{ project.short_description }}</p>
                    </div>

                    {% if related_projects %}
                    <div class="sidebar-widget">
                        <h5 class="widget-title">Related Projects</h5>
                        <ul class="related-projects-list">
                            {% for related in related_projects %}
                            <li class="related-item">
                                <a href="{% url 'mpgepmc_core:project_detail' related.slug %}">
                                {% if related.image %}
                                    <img src="{{ related.image.url }}" alt="{{ related.title }}">
                                {% else %}
                                    <img src="https://placehold.co/70x70/EAEAEA/333333?text=IMG" alt="Placeholder">
                                {% endif %}
                                </a>
                                <div class="related-item-body">
                                    <h6><a href="{% url 'mpgepmc_core:project_detail' related.slug %}">{{ related.title }}</a></h6>
                                    <small>{{ related.get_category_display }}</small>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </aside>
            </div>
        </div>
    </div>
</section>
{% endblock %}
